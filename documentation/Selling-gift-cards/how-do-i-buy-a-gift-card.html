<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
	<head>
		<meta charset="utf-8" />
		<title>Gift Card App Documentation - How do I Buy a Gift Card</title>
		
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,700" />
		<link rel="publisher" href="https://plus.google.com/+UcommerceNet" />
		<link rel="author" href="https://plus.google.com/115340331147418233009/" />

		<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
		
		<link href="../css/main.css?cdv=1" type="text/css" rel="stylesheet"/>
		<link href="../css/ucommerce.css" type="text/css" rel="stylesheet" />
		<link href="../css/bootstrap.css" type="text/css" rel="stylesheet" />
		<link href="../css/SyntaxHighlighter/shCore.css" type="text/css" rel="stylesheet" />
		<link href="../css/SyntaxHighlighter/shThemeVS.css" type="text/css" rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<section class="banner">
				<div class="text">
					<h1>uCommerce Sample App Documentation</h1>
						<p class="strap">Includes documentation setup, sell, manage, refund and let your customers use gift cards</p>
				</div>
				<img src="images/documentation.jpg" alt="" class="banner-image">
			</section>
			<div style="clear:both;"></div>	
			<div class="main">
				<div class="contentcontainer">
					<section class="two-cols cf">
						<nav class="secondary">
							<h2>Documentation</h2>
							<div class="aside">
									<div class="aside-box">
										<div class="holder">
											<div class="frame">
												<ul class="accordion">
													<li><a href="intro.html">What is a gift cards</a></li>
<li><a href="Selling-gift-cards/index.html"><span class="toggle">&nbsp</span><strong>Selling gift cards</strong></a><ul style="display:none;">
<li><a href="Selling-gift-cards/how-do-i-buy-a-gift-card.html">How do I Buy a Gift Card</a></li>
<li><a href="Selling-gift-cards/create-a-gift-card-product.html">Create a Gift Card Product</a></li>
<li><a href="Selling-gift-cards/issuing-gift-cards.html">Issuing Gift Cards</a></li>
</ul></li>
<li><a href="Using-gift-cards/index.html"><span class="toggle">&nbsp</span><strong>Using gift cards</strong></a><ul style="display:none;">
<li><a href="Using-gift-cards/How-do-i-use-a-gift-card.html">How do I Use a Gift Card</a></li>
</ul></li>
<li><a href="Refunding-gift-cards/index.html"><strong>Refunding gift cards</strong></a><ul style="display:none;">
</ul></li>
<li><a href="Managing-gift-cards/index.html"><span class="toggle">&nbsp</span><strong>Managing Gift Cards</strong></a><ul style="display:none;">
<li><a href="Managing-gift-cards/overview-of-gift-cards.html">Overview of gift cards</a></li>
<li><a href="Managing-gift-cards/manually-issueing-gift-cards.html">Manually issue a gift card</a></li>
</ul></li>

												</ul>
											</div>
										</div>
									</div>
								</div>
						</nav>
						<section class="main-col">
							<h1 id="how-do-i-buy-a-gift-card">How do I Buy a Gift Card</h1>
<p>When buying gift cards you have two options:
* Buy a gift card using the fixed prices entered in the backend.
* Let the customers choose their own price not present in the price tier.</p>
<p>This article will describe both scenarios.</p>
<p>Before we dive into the code you need to know that we're adding a variant to the basket, which will hold the price configured in the backend as described in <a href="Selling-gift-cards/create-a-gift-card-product.html">How to Create a Gift Card Product</a>. </p>
<h2 id="presenting-the-gift-cards">Presenting the gift cards</h2>
<p>Say you want to present your gift card prices in a dropdown, the following code will allow you to show each of the prices. Current price group will automatically be taken into account.</p>
<p>Please note that you need to present the amount without Tax as gift cards are purchased without tax added. 
Please also note that the price showed is calculated so any discounts applied will be taken into account in &quot;YourPrice&quot;, but will not affect the price issued on the gift card.
Alternatively, you can also show the list price, which is the price, configured in the backend and the amount issued on the gift card regardless of discounts.</p>
<pre class="brush: csharp">
    
    		
    	&lt;select name="variantSku">
    	@foreach(var variant in product.Variants) {
    		var variantPrice = CatalogLibrary.CalculatePrice(variant);
    		&lt;option value="@variant.VariantSku">@variantPrice.YourPrice.AmountExclTax&lt;/option> 
    
    		//Alternatively show the list price
    		//&lt;option value="@variant.VariantSku">@variantPrice.ListPrice.AmountExclTax&lt;/option> 
    	}
    	&lt;/select>
    
    </pre>
<h2 id="buy-a-gift-card-using-prices-entered-in-the-backend">Buy a Gift Card Using Prices Entered in the Backend</h2>
<p>In order to add a gift card to the basket, all you need to do is use TransactionLibrary exactly like adding another product to the basket:</p>
<pre class="brush: csharp">
    
    
    	UCommerce.Api.TransactionLibrary.AddToBasket(1, "sku", "variantSku");
    
    </pre>
<h2 id="let-the-customer-choose-the-price">Let the Customer Choose the Price</h2>
<p>If you want to let the customer choose a custom amount on the gift card issued, all you need to do is collection that information and use an overloaded parameter on AddToBasket. You do need to select a variant though, but the variant selected is not used for anything so it might as well just be the first variant on the gift card product.</p>
<pre class="brush: csharp">
    
    		
    	TransactionLibrary.AddToBasket(1, product.Sku, product.Variants.First().VariantSku, unitPrice: 123, addToExistingLine: false);
    
    </pre>
<p>That is all that is needed for now. The checkout flow will automatically take care of everything else. All you need to worry about now is letting the customer use the gift card once it has been issued.</p>

						</section>
					</section>
				</div>
			</div>		
		</div>
		
		<script type="text/javascript" src="../scripts/jquery-1.7.2.min.js?cdv=1"></script>
		<script type="text/javascript" src="../scripts/UCommerce.js"></script>
		<script type="text/javascript" src="../scripts/SyntaxHighlighter/shCore.js"></script>
		<script type="text/javascript" src="../scripts/SyntaxHighlighter/shAutoloader.js"></script>
		<script type="text/javascript">
			SyntaxHighlighter.autoloader(
				'js jscript javascript	../scripts/SyntaxHighlighter/shBrushJScript.js',
				'csharp					../scripts/SyntaxHighlighter/shBrushCSharp.js',
				'xml xslt html			../scripts/SyntaxHighlighter/shBrushXml.js',
				'sql					../scripts/SyntaxHighlighter/shBrushSql',
				'css					../scripts/SyntaxHighlighter/shBrushCss.js',
				'json					../scripts/SyntaxHighlighter/shBrushJson.js'
			);
			
			SyntaxHighlighter.all();
			
			$(function() {
				$('table').addClass('variables-matrix table table-bordered table-striped');
			});
		</script>
	</body>
</html>
